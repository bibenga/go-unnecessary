<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <link rel="stylesheet" href="/static/bootstrap-5.2.3/css/bootstrap.min.css">
    <script type="text/javascript" src="/static/bootstrap-5.2.3/js/bootstrap.bundle.min.js"></script>

    <script async type="text/javascript">
        async function UnnecessaryInvoke(bejaviorId, eventCode, elementId) {
            try {
                var link = window.location.href;
                if (link.indexOf('?') >= 0) {
                    link += '&anticache=' + Math.random()
                } else {
                    link += '?anticache=' + Math.random()
                }
                var response = await fetch(link, {
                    method: "POST",
                    credentials: "same-origin",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({
                        "bejaviorId": bejaviorId,
                        "eventCode": eventCode,
                        "elementId": elementId,
                    }),
                });
                var ajaxResponse = await response.json();
                ajaxResponse.items.forEach(item => {
                    console.log(item);
                    el = document.getElementById(item.markupId);
                    if (!!item.body) {
                        el.outerHTML = item.body;
                    }
                    if (!!item.script) {
                        // todo: insecure
                        eval(item.script);
                    }
                });
            } catch (e) {
                console.log(e);
            }
        }
        function UnnecessaryAddEventListener(lazy, bejaviorId, eventCode, elementId) {
            var link = () => {
                var el = document.getElementById(elementId);
                el.addEventListener(eventCode, event => {
                    UnnecessaryInvoke(bejaviorId, eventCode, elementId)
                    event.preventDefault();
                    event.stopPropagation();
                    return false;
                });
            }
            if (lazy) {
                document.addEventListener("DOMContentLoaded", link);
            } else {
                link();
            }
        }
    </script>

    <unnecessary:head>
        <!-- html parser from GO move this tag into body! -->
    </unnecessary:head>
</head>

<body>
    <div class="container">
        <div unnecessary:id="holder">
            <div>
                <button unnecessary:id="btnPlus1" type="button" class="btn btn-primary">+1</button>
                <button unnecessary:id="btnMenos1" type="button" class="btn btn-secondary">-1</button>
            </div>
            <div unnecessary:id="rawValue"></div>
            <div unnecessary:id="dynamicValue"></div>
            <div>
                <input unnecessary:id="textValue" type="text" />
                <textarea unnecessary:id="textareaValue"></textarea>
            </div>
            <div unnecessary:id="loop">
                <div unnecessary:id="loopValue"></div>
            </div>
            <table>
                <tr unnecessary:id="tr">
                    <td unnecessary:id="td" style="border: 1px solid black;">table</td>
                </tr>
            </table>
            <div unnecessary:id="notEnabled">
                Olala
            </div>
            <div>END</div>
        </div>
    </div>
</body>

</html>